---
title: Mensagens de commit na r√©gua
date: 2021-03-31
spoiler: Mudan√ßas de pensamento que entregam commits mais interessantes
author: Andre Benatti
featuredImage: ./social_pt.jpg
---

Sabe aqueles commits bagun√ßados, sem padr√£o algum e muitas vezes sem corpo de descri√ß√£o, contendo apenas o t√≠tulo? Caso n√£o, d√™ uma olhada nos [primeiros commits do meu blog](https://github.com/dotpegaso/personal-blog/commits/master) (at√© 29/03/2021) para entender bem sobre o que eu estou falando.

Realizei os commits iniciais dessa maneira de prop√≥sito, para poder ilustrar essa discuss√£o sobre a import√¢ncia de commits bem estruturados, e como algumas pequenas mudan√ßas de pensamento podem beneficiar o projeto da sua equipe.

> üî¨ **Pesquisa sobre o tema:**  
> Questionei algumas pessoas pr√≥ximas sobre padr√µes de mensagens
> de commit elas costumavam usar em suas empresas e, por exce√ß√£o de duas,
> todas as outras respostas diziam que __n√£o h√° um padr√£o__.

Quando falamos sobre a descri√ß√£o de um commit, falamos sobre facilitar manuten√ß√µes futuras. Se *manutenibilidade* √© um t√≥pico importante para a sua equipe, voc√™ n√£o deveria deixar um commit bem estruturado fora disso.

Acredito tamb√©m que, pessoas que pouco se importam com um commit bem estruturado, s√£o pessoas que pouco utilizam comandos como `git log`, `git rebase` e afins. Mas quando lidamos com um projeto grande, √© importante tomarmos nota de que o git tamb√©m pode servir como ferramenta de documenta√ß√£o, e que um commit bem estruturado pode trazer muitos frutos positivos para toda a equipe.

## __Duas pe√ßas de ouro sobre commits__

√â comum seguirmos algumas pequenas regras, como a adi√ß√£o de um `hash` referenciando algum ticket no t√≠tulo, ou at√© mesmo o [padr√£o Karma](https://karma-runner.github.io/0.10/dev/git-commit-msg.html) para atribuir escopos. As dicas abaixo mudaram completamente meu pensamento sobre como entregar commits bem estruturados:  

### __1. Descreva t√≠tulos em modo imperativo__
O pr√≥prio git possui padr√£o imperativo de mensagens, tome o uso de `git revert` ou `git merge` como exemplos. Recomenda-se ent√£o que esse padr√£o seja mantido, de modo que facilite a leitura do `git log` tamb√©m.  

Um caminho f√°cil para seguir essa regra √© sempre pensar na seguinte frase antes de determinar um t√≠tulo:  

"Ao ser aprovado, esse commit <__mensagem do t√≠tulo__>"

Exemplos:
  - Ao ser aprovado, esse commit __atualiza componentes do header__
  - Ao ser aprovado, esse commit __adiciona o componente rodap√©__   

<br />  

  
### __2. Explique o porqu√™, n√£o o "como"__

Assim como bons c√≥digos s√£o auto-explicativos, um bom commit tamb√©m deve ser. Procure *contar hist√≥rias* sobre o motivo do commit existir ao inv√©s de apenas pontuar aquilo que voc√™ fez, por exemplo:

Evite trilhar esse caminho:

```git
# t√≠tulo
atualiza√ß√£o do header  
# descri√ß√£o
- novas cores para os √≠cones  
- novo bot√£o adicionado  
```  
<br />  

Procure fazer dessa maneira:
```git
# t√≠tulo
feat(header): Atualiza componentes do header  
# descri√ß√£o
Novas cores adicionadas aos √≠cones
para corrigir o contraste apresentado
por conta do novo dark mode

Novo bot√£o adicionado para gerenciar
o tema escolhido pelo usu√°rio
#adicione refer√™ncias de `issue tracker` no final
Resolve: #321
Veja tamb√©m: #213, #132
```
<br />


- `feat` seguindo o [padr√£o Karma](https://karma-runner.github.io/0.10/dev/git-commit-msg.html)
- `(header)` √© o escopo sobre a √°rea do projeto que est√° sendo referenciada
- T√≠tulo apresentado em modo imperativo
- Descri√ß√£o bem detalhada sobre o motivo do commit existir
- Caso use algum [`issue tracker`](https://help.clubhouse.io/hc/en-us/articles/207540323-Using-Branches-and-Pull-Requests-with-the-Clubhouse-VCS-Integrations), adicione as refer√™ncias ao final  

> ‚ú® __Detalhes e mais detalhes__  
> Al√©m do Karma, outra especifica√ß√£o bem interessante tamb√©m
> √© apresentada no [Conventional Commits](https://www.conventionalcommits.org), vale a pena conferir! 

## __Mais boas pr√°ticas__

Quando se fala sobre commits bem estruturados, √© comum encontrarmos tamb√©m as seguintes regras adicionais:

1. T√≠tulo sempre em mai√∫sculo
2. N√£o coloque ponto final no t√≠tulo
3. Pule uma linha para separar o t√≠tulo da descri√ß√£o
4. At√© 50 caracteres no t√≠tulo
5. At√© 72 caracteres por linha na descri√ß√£o

<br />

Que, em conjunto com as duas apresentadas anteriormente, forma as famosas ["7 regras para √≥timas mensagens de commit"](https://bit.ly/3u4uGTe).

Caso voc√™ esteja em um ambiente sem regras sobre commits, procure levantar toda essa reflex√£o com a sua equipe de desenvolvimento. Voc√™ pode at√© mesmo se destacar apenas por oferecer uma vis√£o organizacional sobre algo que a maioria ignora.

Valeu demais! üëãüèæ